# Домашнее задание к занятию "`Репликация и масштабирование. Часть 2`" - `Бурыкин Кирилл`

### Задание 1

Активный master-сервер и пассивный slave-сервер:

Один главный сервер + один резервный

Плюсы:

· Резервная копия на случай падения master

· Можно делать бэкапы без остановки master

· Разгрузка чтения данных на slave

· Простая настройка и поддержка

Master-сервер и несколько slave-серверов:

Один master + несколько slave

Плюсы:

· Все преимущества первого варианта

· Больше slave это значит больше возможностей для чтения

· Распределение нагрузки чтения между slave

· Можно использовать для разных целей: аналитика, отчеты, бэкапы

· Выше отказоустойчивость

### Задание 2 
#### 1. Вертикальный шардинг (разделяем по таблицам)

Каждую таблицу кладем на отдельный сервер,чтобы запросы к разным таблицам не мешали друг другу:

Сервер 1: Пользователи; Сервер 2: Книги; Сервер 3:Магазины.  

#### 2. Горизонтальный шардинг (разделяем данные внутри таблиц)

Большие таблицы делим на части: 

Для пользователей (делим по ID):

Сервер 1: пользователи с ID 1-10000
Сервер 2: пользователи с ID 10001-20000  
Сервер 3: пользователи с ID 20001-30000

Для книг (делим по алфавиту):

Сервер 4: книги названиями на А-И
Сервер 5: книги названиями на К-С
Сервер 6: книги названиями на Т-Я

Для магазинов (делим по городам):

Сервер 7: магазины в Москве и СПб
Сервер 8: магазины в других городах

#### Каждый сервер работает в паре:

· Master - принимает записи для своей части данных
· Slave - копирует с Master, только для чтения 

Например:

Сервер 1-Master: пользователи ID 1-10000 (принимает записи)
Сервер 1-Slave:  копия пользователей 1-10000 (только чтение)

#### Как все работает вместе: 

1. Пришел запрос "найти пользователя">идет к серверам с пользователями
2. Пришел запрос "показать книги">идет к серверам с книгами
3. Пришел запрос "добавить книгу">идет на Master-сервер книг
4. Пришел запрос "прочитать книгу">идет на Slave-сервер книг


